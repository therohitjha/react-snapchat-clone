(this["webpackJsonpreact-snapchat-clone"]=this["webpackJsonpreact-snapchat-clone"]||[]).push([[0],{127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t),a.d(t,"store",(function(){return nt}));var n=a(0),r=a.n(n),c=a(30),o=a.n(c),i=a(32),l=a(9),s=a(10),u=a(2),m=a(12),d=a(27),f=Object(s.c)({name:"app",initialState:{drawers:[],footerType:"full"},reducers:{showDrawer:{reducer:function(e,t){var a=t.payload,n=e.drawers.filter((function(e){return e.component!==a.component}));e.drawers=[].concat(Object(d.a)(n),[a])},prepare:function(e){return{payload:Object(m.a)(Object(m.a)({},{animationIn:"slideInUp",animationOut:"slideOutDown",animationInDuration:300,animationOutDuration:300,theme:"light",position:"front",show:!0}),e)}}},hideDrawer:function(e,t){var a=t.payload;e.drawers=e.drawers.map((function(e){return e.component===a?Object(m.a)(Object(m.a)({},e),{},{show:!1}):e}))},hideAllDrawers:function(e){var t,a=e.drawers.filter((function(e){return e.show})),n=a[a.length-1].component;t=1===a.length?e.drawers.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{show:!1})})):e.drawers.map((function(e){return e.component===n?Object(m.a)(Object(m.a)({},e),{},{show:!1}):Object(m.a)(Object(m.a)({},e),{},{show:!1,animationOutDuration:0})})),e.drawers=t},setFooterType:function(e,t){e.footerType=t.payload}}}),p=f.actions,h=p.showDrawer,b=p.hideDrawer,E=p.hideAllDrawers,v=p.setFooterType,g=f.reducer,O=a(4),w=a.n(O),j=a(3),y=a(8),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return setTimeout(e,t)},C=function(){var e=Object(y.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={newAppMessage:"./audio/blip.mp3",cameraShutter:"./audio/shutter.mp3"},a.src=n[t],e.prev=2,e.next=5,a.play();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),N=navigator.language,S=void 0===N?"en-US":N,I={baseURL:"./api",get:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return I.respond("get",e,null,t)},post:function(e,t){return I.respond("post",e,t)},put:function(e,t){return I.respond("put",e,t)},patch:function(e,t){return I.respond("patch",e,t)},delete:function(e){return I.respond("delete",e)},respond:function(){var e=Object(y.a)(w.a.mark((function e(t,a,n,r){var c,o,i,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r?a:I.baseURL+a,o=n?{headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(n)}:{},e.prev=2,e.next=5,fetch(c,Object(m.a)({method:t},o));case 5:return i=e.sent,e.next=8,i.json();case 8:return l=e.sent,e.abrupt("return",[null,l]);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",[e.t0]);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()},x=function(e){return e.then((function(e){return e instanceof Error?[e]:[null,e]})).catch((function(e){return[e]}))},M=function(e){return new Promise((function(t){return setTimeout(t,e)}))},A=(a(43),a(69),{loading:!1,error:!1,data:[]}),D={cameraMode:"user",photoTaken:!1,photos:A},T=Object(s.b)("photos/getPhotos",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/photos.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],n){e.next=8;break}return e.abrupt("return",r.photos);case 8:case"end":return e.stop()}}),e)})))),L=Object(s.c)({name:"photos",initialState:D,reducers:{setPhoto:{reducer:function(e,t){var a=t.payload,n=a.time,r=a.dataURL;e.photoTaken?e.photos[0].data.images.unshift(t.payload.dataURL):(e.photoTaken=!0,e.photos.data.unshift({month:n.toLocaleString("default",{month:"long"}),year:n.getFullYear(),images:[r]}))},prepare:function(e){return{payload:{dataURL:e,time:new Date}}}},toggleCameraMode:function(e){e.cameraMode="user"===e.cameraMode?"environment":"user"}},extraReducers:function(e){e.addCase(T.pending,(function(e){e.photos.loading=!0})),e.addCase(T.fulfilled,(function(e,t){var a=e.photos,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(T.rejected,(function(e){var t=e.photos;t.loading=!1,t.error=!0}))}}),P=L.actions,R=P.setPhoto,_=P.toggleCameraMode,F=L.reducer,U={session:{id:"",username:"",avatar:"",gender:"other",age:0,fullName:""},geolocation:{country:"",state:"",city:"",zip:"",latitude:0,longitude:0},friends:A},H=Object(s.b)("user/sessionFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/session.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",r.session);case 9:case"end":return e.stop()}}),e)})))),z=Object(s.b)("user/friendsFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/friends.json");case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",r.friends);case 9:case"end":return e.stop()}}),e)})))),B=Object(s.b)("user/geoLocationFetched",Object(y.a)(w.a.mark((function e(){var t,a,n,r,c,o,i,l,s,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("https://geolocation-db.com/json/",!0);case 2:if(t=e.sent,a=Object(j.a)(t,2),n=a[0],r=a[1],!n){e.next=8;break}return e.abrupt("return",!1);case 8:return c=r.country_name,o=r.state,i=r.city,l=r.postal,s=r.latitude,u=r.longitude,e.abrupt("return",{country:c,state:o,city:i,zip:l,latitude:s,longitude:u});case 10:case"end":return e.stop()}}),e)})))),V=Object(s.c)({name:"user",initialState:U,reducers:{setLatLon:function(e,t){var a=e.geolocation,n=t.payload,r=n.latitude,c=n.longitude;a.latitude=r,a.longitude=c}},extraReducers:function(e){e.addCase(H.fulfilled,(function(e,t){var a=t.payload;a&&(e.session=a)})),e.addCase(B.fulfilled,(function(e,t){var a=t.payload;a&&(e.geolocation=a)})),e.addCase(z.pending,(function(e){e.friends.loading=!0})),e.addCase(z.fulfilled,(function(e,t){var a=e.friends,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(z.rejected,(function(e){var t=e.friends;t.loading=!1,t.error=!0}))}}),W=V.actions.setLatLon,G=V.reducer,K={sn:"snow",sl:"sleet",h:"hail",t:"thunderstorm",s:"showers",c:"clear",hr:"heavy-rain",lr:"light-rain",hc:"heavy-cloud",lc:"light-cloud"},J={snow:"faSnowflake",sleet:"faIcicles",hail:"faCloudMeatball",thunderstorm:"faPooStorm",showers:"faCloudShowersHeavy",clear:"faSun","heavy-rain":"faCloudShowersHeavy","light-rain":"faCloudRain","heavy-cloud":"faCloud","light-cloud":"faCloudSun"},q=Object(s.b)("snapMap/snapsFetched",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lat,n=t.lon,r=t.city,c=t.state,e.next=3,I.get("/snaps.json?geo=".concat(a,",").concat(n));case 3:if(o=e.sent,i=Object(j.a)(o,2),l=i[0],s=i[1],!l){e.next=9;break}return e.abrupt("return",!1);case 9:return u=[{lat:a+.006,lon:n-.006},{lat:a+.009,lon:n+.005},{lat:a+.006,lon:n-.001},{lat:a-.005,lon:n-.002},{lat:a-.001,lon:n-.005},{lat:a+.005,lon:n- -.006},{lat:a,lon:n+.004}],d=s.snaps.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{location:r&&c?"".concat(r,", ").concat(c):null,lat:u[t].lat,lon:u[t].lon})})),e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(s.b)("snapMap/weatherFetched",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c,o,i,l,s,u,m,d,f,p,h,b,E;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.lat,c=t.lon,o="https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location",i={temperature:75,condition:"clear"},e.next=5,I.get("".concat(o,"/search/?lattlong=").concat(r,",").concat(c),!0);case 5:if(l=e.sent,s=Object(j.a)(l,2),u=s[0],m=s[1],!u){e.next=11;break}return e.abrupt("return",!1);case 11:return d=null===(a=m[0])||void 0===a?void 0:a.woeid,e.next=14,I.get("".concat(o,"/").concat(d,"/"),!0);case 14:if(f=e.sent,p=Object(j.a)(f,2),u=p[0],m=p[1],!u){e.next=20;break}return e.abrupt("return",!1);case 20:return h=null===(n=m)||void 0===n?void 0:n.consolidated_weather[0],b=h.the_temp,E=h.weather_state_abbr,i={temperature:(v=b,Math.round(1.8*v+32)),condition:K[E]},e.abrupt("return",i);case 23:case"end":return e.stop()}var v}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=Object(s.c)({name:"snapMap",initialState:{snaps:[],weather:{temperature:0,condition:""}},reducers:{},extraReducers:function(e){e.addCase(Y.fulfilled,(function(e,t){var a=t.payload;a&&(e.weather=a)})),e.addCase(q.fulfilled,(function(e,t){var a=t.payload;a&&(e.snaps=a)}))}}).reducer,X={type:"",url:"",location:"",lat:0,lon:0,time:0,caption:"",shareable:!1},$=X,Z=Object(s.c)({name:"snap",initialState:$,reducers:{addSnap:function(e,t){return t.payload},removeSnap:function(e){return X}}}),ee=Z.actions,te=ee.addSnap,ae=ee.removeSnap,ne=Z.reducer,re=a(157),ce={thread:"Lisa",messages:A},oe=Object(s.b)("chat/messagesReceived",function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/messages.json?thread=".concat(t));case 2:if(a=e.sent,n=Object(j.a)(a,2),r=n[0],c=n[1],!r){e.next=8;break}return e.abrupt("return",!1);case 8:return e.abrupt("return",c.messages);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=Object(s.c)({name:"chat",initialState:ce,reducers:{postMessage:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.author,c=a.message,o=a.time;e.messages.data.push({id:n,author:r,message:c,time:o})},prepare:function(e,t){return{payload:{id:Object(re.a)(),author:e,message:t,time:new Date}}}}},extraReducers:function(e){e.addCase(oe.pending,(function(e){e.messages.loading=!0})),e.addCase(oe.fulfilled,(function(e,t){var a=e.messages,n=t.payload;a.loading=!1,n?a.data=n:a.error=!0})),e.addCase(oe.rejected,(function(e){var t=e.messages;t.loading=!1,t.error=!0}))}}),le=ie.actions.postMessage,se=ie.reducer,ue=a(11),me=a(6),de=a.n(me),fe=a(56),pe=a(39),he=a(57),be=a(1),Ee=(a(72),{faSnapchatSquare:pe.b,faGithub:pe.a,faCircle:he.a,faCamera:be.e,faUserPlus:be.bb,faListAlt:be.z,faGrinBeam:be.w,faAngleRight:be.c,faCompass:be.n,faUserCircle:be.ab,faSearch:be.O,faRetweet:be.M,faAngleDown:be.a,faLocationArrow:be.A,faSignal:be.Q,faBatteryHalf:be.d,faCommentAlt:be.m,faMobile:be.D,faMobileAlt:be.E,faDot:be.f,faLaugh:be.y,faSmileWink:be.R,faEllipsisV:be.t,faEllipsisH:be.s,faCog:be.l,faTimesCircle:be.Z,faTimes:be.Y,faAngleLeft:be.b,faSearchPlus:be.P,faPaw:be.G,faSpider:be.T,faWater:be.db,faPhoneAlt:be.I,faVideo:be.cb,faRocket:be.N,faMicrophone:be.C,faDownload:be.q,faTextHeight:be.X,faPen:be.H,faStickyNote:be.U,faCut:be.p,faPaperclip:be.F,faCropAlt:be.o,faStopwatch:be.V,faExternalLinkAlt:be.v,faPlayCircle:be.J,faEdit:be.r,faMagic:be.B,faQrcode:be.L,faSnowflake:be.S,faIcicles:be.x,faCloudMeatball:be.h,faPooStorm:be.K,faCloudShowersHeavy:be.j,faCloudRain:be.i,faCloud:be.g,faCloudSun:be.k,faSun:be.W,faExclamationCircle:be.u}),ve=function(e){var t=e.icon,a=e.onClick,n=e.className,c=void 0===n?"":n;return t?r.a.createElement(fe.a,{icon:Ee[t],onClick:a,className:de()("icon",Object(ue.a)({},c,!0))}):null},ge=(a(73),function(e){var t,a=e.image,n=e.icon,c=e.icons,o=e.iconClass,i=void 0===o?"":o,l=e.iconClasses,s=void 0===l?[]:l,u=e.buttonClass,m=void 0===u?"":u,d=e.round,f=e.plain,p=e.purple,h=e.label,b=e.onclick,E=e.testId;return r.a.createElement("button",{type:"button",onClick:b,className:de()("btn",(t={},Object(ue.a)(t,m,!0),Object(ue.a)(t,"round",d),Object(ue.a)(t,"plain",f),Object(ue.a)(t,"purple",p),t)),"data-test":E},a?r.a.createElement("img",{src:a,alt:""}):c?c.map((function(e,t){return r.a.createElement(ve,{key:e+t,icon:e,className:de()(Object(ue.a)({},s[t],s[t]))})})):n?r.a.createElement(ve,{icon:n,className:de()(Object(ue.a)({},i,!0))}):null,h&&r.a.createElement("strong",null,h))}),Oe=(a(74),function(e){var t=e.placeholder,a=e.value,c=e.leftIcon,o=e.rightIcon,i=e.onClick,l=e.onFocus,s=e.onBlur,u=e.onChange,m=e.onEnter,d=e.focus,f=e.spellCheck,p=e.animate,h=e.dark,b=Object(n.useRef)(null),E=Object(n.useState)(!1),v=Object(j.a)(E,2),g=v[0],O=v[1];Object(n.useEffect)((function(){p&&O(!0),k((function(){var e;d&&(null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus())}))}),[p,d]);var w=!!i;return r.a.createElement("div",{className:de()("input",{animate:p,full:g,dark:h}),"data-test":"input"},w&&r.a.createElement("div",{className:"disabled-overlay",onClick:i}),c&&r.a.createElement(ve,{icon:c,className:"left-icon"}),r.a.createElement("input",{type:"text",ref:b,placeholder:t,value:a,onClick:i,onFocus:l,onBlur:s,onChange:u,onKeyPress:function(e){var t=e.key;return m&&"Enter"===t&&m()},disabled:w,spellCheck:f||!1,className:de()({"has-left-icon":c}),"data-test":"field"}),o&&r.a.createElement(ve,{icon:o,className:"right-icon"}))}),we=(a(75),function(e){var t=e.insideDrawer,a=Object(u.b)(),n=Object(u.c)((function(e){return e.user.session.avatar})),c=n?{image:n}:{icon:"faUserCircle"};return r.a.createElement("header",{className:"header","data-test":"header"},r.a.createElement(ge,Object.assign({},c,{onclick:function(){return a(h({component:"account"}))},buttonClass:"btn-user",testId:"btn-user"})),r.a.createElement(Oe,{placeholder:"Search",leftIcon:"faSearch",rightIcon:"faUserPlus",dark:t,onClick:function(){return a(h({component:"search",animationIn:"fadeIn",animationOut:"fadeOut",animationInDuration:200,animationOutDuration:200}))}}),r.a.createElement("div",{className:"right"},t?r.a.createElement(ve,{icon:"faEllipsisH"}):r.a.createElement(ge,{icon:"faRetweet",buttonClass:"btn-flip-camera",onclick:function(){return a(_())}})))}),je=function(e){return e.some((function(e){return e.show}))},ye=(a(76),function(){var e=Object(u.c)((function(e){return e.app.drawers})),t=Object(n.useState)(""),a=Object(j.a)(t,2),c=a[0],o=a[1],i=function(){var e=(new Date).toLocaleTimeString(S,{hour:"numeric",minute:"2-digit"}).replace(/AM|PM/,"");o(e)};return Object(n.useEffect)((function(){i(),setInterval(i,1e3)}),[]),r.a.createElement("div",{className:de()("toolbar",{dark:je(e)})},r.a.createElement("div",{className:"left"},r.a.createElement("time",null,c),r.a.createElement(ve,{icon:"faLocationArrow"})),r.a.createElement("div",{className:"right"},r.a.createElement(ve,{icon:"faSignal",className:"icon-signal"}),r.a.createElement(ve,{icon:"faBatteryHalf"})))}),ke=a(18),Ce=(a(127),function(e){var t=e.header,a=e.children,n=e.className,c=void 0===n?"":n,o=e.transparent;return r.a.createElement("section",{className:de()("widget",Object(ue.a)({},c,!0))},r.a.createElement("header",null,t),r.a.createElement("div",{className:de()("inner-content",{transparent:o})},a))}),Ne=(a(128),function(e){var t=e.leftIcon,a=e.rightIcon,n=e.label,c=e.straightEdge;return r.a.createElement("article",{className:de()("pod","action-item",{"straight-edge":c})},r.a.createElement(ve,{icon:t,className:"ico-left"}),n,r.a.createElement(ge,{icon:a,buttonClass:"ico-right"}))}),Se=a(19),Ie=a.n(Se),xe=(a(129),function(e){var t=e.fixed,a=e.nobg,n=e.message;return r.a.createElement("div",{className:de()("loading",{fixed:t,message:n,nobg:a})},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"sk-cube-grid"},new Array(9).fill(null).map((function(e,t){return r.a.createElement("div",{key:"cube-".concat(t),className:"sk-cube sk-cube"+t})}))),n&&r.a.createElement("span",null,n)))}),Me=(a(130),Object({NODE_ENV:"production",PUBLIC_URL:"/react-snapchat-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MAP_BOX_API_KEY),Ae=!!(null===Me||void 0===Me?void 0:Me.length);Ae&&(Ie.a.accessToken=Me);var De=function(){var e=Object(u.b)(),t=Object(n.useRef)(null),a=Object(n.useState)(!0),c=Object(j.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){Ae&&Object(y.a)(w.a.mark((function t(){var a,n,r,c,o,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(B());case 2:(a=t.sent).payload?(n=a.payload,r=n.latitude,c=n.longitude,l(r,c)):(o=function(t,a){l(t,a),e(W({latitude:t,longitude:a}))},i=function(){return o(40.75491,-73.994102)},"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;o(t.latitude,t.longitude)}),(function(e){i()}),{maximumAge:1/0,timeout:5e3,enableHighAccuracy:!0}):i());case 4:case"end":return t.stop()}}),t)})))()}),[e]);var l=function(e,a){var n=new Ie.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[a,e],zoom:13,interactive:!1}).on("load",(function(){i(!1);var t=document.createElement("div");t.className="self-marker",new Ie.a.Marker(t).setLngLat([a,e]).addTo(n)}))};return r.a.createElement("div",{className:"preview-map","data-test":"preview-map",onClick:function(){return Ae&&e(h({component:"snapMap",animationIn:"fadeIn",animationOut:"fadeOut",animationInDuration:0,animationOutDuration:0,theme:"stripped"}))}},Ae?o?r.a.createElement(xe,null):null:r.a.createElement("div",{className:"api-key-msg"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"earth emoji"},"\ud83c\udf0e")," ","Get a free mapboxgl"," ",r.a.createElement("a",{href:"https://docs.mapbox.com/help/glossary/access-token/",target:"_blank",rel:"noopener noreferrer"},"API key here"),", then rename the ",r.a.createElement("code",null,".env.sample")," file at the root of the project to just ",r.a.createElement("code",null,".env")," and place the key inside, finally run",r.a.createElement("code",null,"npm start")," again to view the snap map features!")),Ae&&r.a.createElement("div",{className:"map",ref:t}))},Te=(a(131),(new Date).toLocaleDateString(S,{year:"numeric",month:"long",day:"numeric"})),Le=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user.session.username}));return r.a.createElement("main",{className:"account"},r.a.createElement("header",null,r.a.createElement(ge,{icon:"faAngleDown",onclick:function(){return e(b("account"))},buttonClass:"btn-close"}),r.a.createElement(ve,{icon:"faCog",className:"ico-gear"})),r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"./images/logo.svg",alt:""}),r.a.createElement("strong",null,t)),r.a.createElement(Ce,{header:"Stories",transparent:!0},r.a.createElement(Ne,{leftIcon:"faCamera",rightIcon:"faEllipsisV",label:"Add to My Story"}),r.a.createElement(Ne,{leftIcon:"faCamera",rightIcon:"faEllipsisV",label:"Add to Our Story"})),r.a.createElement(Ce,{header:"Friends",transparent:!0},r.a.createElement(Ne,{leftIcon:"faUserPlus",rightIcon:"faAngleRight",label:"Add Friends"}),r.a.createElement(Ne,{leftIcon:"faListAlt",rightIcon:"faAngleRight",label:"My Friends"})),r.a.createElement(Ce,{header:"Bitmoji",transparent:!0},r.a.createElement(Ne,{leftIcon:"faGrinBeam",rightIcon:"faAngleRight",label:"Create Bitmoji"})),r.a.createElement(Ce,{header:"Snap Map"},r.a.createElement(De,null),r.a.createElement(Ne,{leftIcon:"faCompass",rightIcon:"faAngleRight",label:"Set a Status",straightEdge:!0})),r.a.createElement("footer",null,r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/TowhidKashem/snapchat-clone",target:"_blank",rel:"noopener noreferrer",title:"Github Repo"},r.a.createElement(ve,{icon:"faGithub"})),"Joined SnapChat on ",Te)))},Pe=(a(132),{sm:45,md:100,lg:150}),Re=function(e){var t=e.src,a=e.size,n=void 0===a?"md":a;return r.a.createElement("img",{src:t,className:"avatar",alt:"",width:Pe[n]})},_e=(a(133),function(e){var t=e.user,a=t.username,n=t.fullName,c=t.avatar;return r.a.createElement("article",{className:"pod user"},r.a.createElement(Re,{src:c,size:"sm"}),r.a.createElement("div",{className:"meta"},r.a.createElement("header",null,n),r.a.createElement("span",null,a)))}),Fe=(a(134),function(e){var t=e.message,a=void 0===t?"Oops couldn't load content":t;return r.a.createElement("div",{className:"error"},r.a.createElement("p",null,r.a.createElement(ve,{icon:"faExclamationCircle"})," ",a))}),Ue=(a(135),function(e){var t=e.show,a=Object(u.b)(),c=Object(u.c)((function(e){return e.user.friends})),o=c.loading,i=c.error,l=c.data,s=Object(n.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1];Object(n.useEffect)((function(){t||f("")}),[t]);var p=new RegExp(d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),h=d?l.filter((function(e){var t=e.fullName,a=e.username;return t.match(p)||a.match(p)})):l,E=(null===h||void 0===h?void 0:h.length)>0;return r.a.createElement("main",{className:"search"},r.a.createElement("header",null,r.a.createElement(Oe,{placeholder:"Search",leftIcon:"faSearch",value:d,onChange:function(e){return f(e.currentTarget.value)},focus:t,animate:!0,dark:!0}),r.a.createElement(ge,{label:"Cancel",plain:!0,onclick:function(){return a(b("search"))},testId:"btn-cancel"})),r.a.createElement("section",null,o?r.a.createElement(xe,{nobg:!0}):i?r.a.createElement(Fe,null):r.a.createElement(ke.Animated,{animationIn:"slideInUp",animationOut:"slideOutDown",animationInDuration:250,animationOutDuration:0,isVisible:t},r.a.createElement("div",{className:"results"},E&&r.a.createElement(Ce,{header:"Quick Add"},h.map((function(e){return r.a.createElement(_e,{key:e.id,user:e})})))),d&&!E&&r.a.createElement("p",{className:"no-results"},r.a.createElement("span",{role:"img","aria-label":"poop emoji"},"\ud83d\udca9")," ","No results"))))}),He=(a(136),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.user,a=e.snapMap;return{city:t.geolocation.city,weather:a.weather}})),a=t.city,n=t.weather,c=n.temperature,o=n.condition;return r.a.createElement("header",{className:"weather-header"},r.a.createElement("div",{className:"left"},r.a.createElement(ge,{icon:"faTimes",round:!0,onclick:function(){return e(b("snapMap"))},buttonClass:"btn-close",testId:"btn-close"}),r.a.createElement(ge,{icon:"faSearch",round:!0})),r.a.createElement("div",{className:"center"},r.a.createElement("article",{className:"weather"},r.a.createElement("header",null,a),r.a.createElement("div",{className:"condition"},r.a.createElement(ve,{icon:J[o]}),r.a.createElement("span",{className:"temperature"},c,"\xb0F")))),r.a.createElement("div",{className:"right"},r.a.createElement(ge,{icon:"faCog",round:!0})))});a(137);Ie.a.accessToken=Object({NODE_ENV:"production",PUBLIC_URL:"/react-snapchat-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MAP_BOX_API_KEY;var ze=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.user,a=e.snapMap;return{geolocation:t.geolocation,snaps:a.snaps}})),a=t.geolocation,c=t.snaps,o=Object(n.useRef)(null),i=Object(n.useState)(!0),l=Object(j.a)(i,2),s=l[0],m=l[1],d=Object(n.useState)(null),f=Object(j.a)(d,2),p=f[0],b=f[1],E=a.latitude,v=a.longitude,g=a.city,O=a.state;return Object(n.useEffect)((function(){e(q({lat:E,lon:v,city:g,state:O})),e(Y({lat:E,lon:v})),b(new Ie.a.Map({container:o.current,style:"mapbox://styles/mapbox/streets-v11",center:[v,E],zoom:13}).on("load",(function(){return m(!1)})))}),[e,E,v,g,O]),Object(n.useEffect)((function(){if(p){!function(){var e=document.createElement("div");e.className="self-marker",new Ie.a.Marker(e).setLngLat([v,E]).addTo(p),setTimeout((function(){e.classList.add("zoomed-in"),new Ie.a.Popup({closeOnClick:!1}).setLngLat([v,E]).setHTML("<header>Me</header>\n              <p>Not Sharing Location</p>").addTo(p)}),2300)}(),setTimeout((function(){return p.flyTo({zoom:14})}),2e3)}}),[p,E,v]),Object(n.useEffect)((function(){c.map((function(t){return function(t){var a=document.createElement("div");a.className="marker",a.setAttribute("data-test","marker"),a.onclick=function(a){a.target.classList.add("active"),k((function(){e(te(t)),e(h({component:"snap",animationIn:"zoomIn",animationOut:"zoomOut",theme:"dark"}))}),900),k((function(){return a.target.classList.remove("active")}),1e3)},new Ie.a.Marker(a).setLngLat([t.lon,t.lat]).addTo(p)}(t)}))}),[c,p,e]),r.a.createElement("div",{className:"snap-map"},r.a.createElement("div",{className:"inner"},s&&r.a.createElement(xe,null),r.a.createElement(He,null),r.a.createElement("div",{ref:o,className:"content"})))},Be=(a(138),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.snap})),a=Object(n.useRef)(null),c=t.location,o=t.time,i=t.type,l=t.url,s=t.caption,m=t.shareable;Object(n.useEffect)((function(){"video"===i&&a.current&&(a.current.load(),a.current.play())}),[t,i]);var d=function(){e(b("snap")),k((function(){return e(ae())}))};return r.a.createElement("main",{className:"snap",onClick:d,"data-test":"snap"},r.a.createElement("header",{className:de()({metadata:c||o})},(c||o)&&r.a.createElement("div",{className:"left"},c&&r.a.createElement("span",{"data-test":"location"},c),o&&r.a.createElement("time",{"data-test":"time"},function(e){var t=new Intl.RelativeTimeFormat(S,{numeric:"auto",style:"long"}),a=e-Date.now(),n=Math.ceil(a/31536e6);if(n)return t.format(n,"year");var r=Math.ceil(a/168e6);if(r)return t.format(r,"month");var c=Math.ceil(a/864e5);if(c)return t.format(c,"day");var o=Math.ceil(a/36e5);if(o)return t.format(o,"hour");var i=Math.ceil(a/6e4);if(i)return t.format(i,"minute");var l=Math.ceil(a/1e3);return t.format(l,"second")}(o))),r.a.createElement("div",{className:"right"},r.a.createElement(ge,{icon:"faEllipsisV"}))),"video"===i?r.a.createElement("div",{className:"video-container"},r.a.createElement("video",{ref:a,playsInline:!0,onEnded:d,"data-test":"video"},r.a.createElement("source",{src:l,type:"video/mp4"}))):r.a.createElement("div",{className:"image-container","data-test":"image"},s&&r.a.createElement("div",{className:"caption","data-test":"caption"},s),r.a.createElement("img",{src:l,alt:""})),m&&r.a.createElement("footer",null,r.a.createElement(ge,{icon:"faLocationArrow"})))}),Ve=(a(139),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.camera;return{photos:t.photos,photoTaken:t.photoTaken}})),a=t.photos,n=t.photoTaken;return r.a.createElement("main",{className:"archive"},r.a.createElement(we,{insideDrawer:!0}),a.loading?r.a.createElement(xe,{nobg:!0}):a.error?r.a.createElement(Fe,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"view-options"},r.a.createElement(ge,{label:"Snaps",buttonClass:"active"}),r.a.createElement(ge,{label:"Camera Roll"})),!n&&r.a.createElement("section",{className:"message","data-test":"placeholder-msg"},r.a.createElement("p",null,"Take a photo and it will appear here!")),a.data.map((function(t){var a=t.month,n=t.year,c=t.images;return r.a.createElement("section",{key:a,className:"month","data-test":"month"},r.a.createElement("h3",null,a," ",n),c.map((function(t,a){return r.a.createElement("img",{key:t+a,src:t,width:100,alt:"",onClick:function(){return function(t){e(te({type:"photo",url:t,shareable:!0})),e(h({component:"snap",animationIn:"zoomIn",animationOut:"zoomOut",theme:"dark"}))}(t)},"data-test":"snap-image"})})))}))))}),We=["Oh wow I can't believe it!","Hahaha you're so right!!","No way, when?!! \ud83d\ude31","OMG I totally agree!","Umm I'm not so sure about that one \ud83e\udd28","Wait, you are actually being serious rn?","Hahahahaha you're too much \ud83d\ude02\ud83d\ude02\ud83d\ude02","Did you watch the new show last night?","\ud83e\udd21"],Ge=(a(140),function(e){var t=e.icons;return r.a.createElement("div",{className:"pill"},t.map((function(e){return r.a.createElement(ge,{key:e,icon:e})})))}),Ke=(a(141),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.user,a=e.chat;return{username:t.session.username,thread:a.thread,messages:a.messages}})),a=t.username,c=t.thread,o=t.messages,i=Object(n.useRef)(null),l=Object(n.useRef)(null),s=Object(n.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1],p=Object(n.useState)(!1),h=Object(j.a)(p,2),E=h[0],v=h[1];Object(n.useLayoutEffect)((function(){i.current&&(i.current.scrollTop=i.current.scrollHeight)}),[o]);var g=Object(n.useCallback)(function(){var t=Object(y.a)(w.a.mark((function t(a){var n,r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a?[1e3,0]:[800,500,1e3,700,600,0],r=0;case 2:if(!(r<n.length)){t.next=10;break}return v((function(e){return!e})),t.next=6,M(n[r]);case 6:return t.abrupt("continue",7);case 7:r++,t.next=2;break;case 10:o=a?"Soooo, how was it!?":(i=We)[Math.floor(Math.random()*i.length)],e(le(c,o)),l.current&&C("newAppMessage",l.current);case 13:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}(),[c,e]);Object(n.useEffect)((function(){e(oe(c)),g(!0)}),[c,g,e]);var O=function(){d.length&&(e(le(a,d)),f(""),setTimeout(g,1e3))};return r.a.createElement("main",{className:"chat"},r.a.createElement("header",null,r.a.createElement(Re,{src:"./images/bitmoji-other.png"}),r.a.createElement("h2",null,c),r.a.createElement("div",{className:"right"},r.a.createElement(Ge,{icons:["faPhoneAlt","faVideo"]}),r.a.createElement(ge,{icon:"faAngleRight",onclick:function(){return e(b("chat"))},buttonClass:"btn-arrow",testId:"btn-close-chat"}))),r.a.createElement("section",{ref:i,className:"messages"},o.loading?r.a.createElement(xe,{nobg:!0}):o.error?r.a.createElement(Fe,null):o.data.map((function(e,t){var n=e.author,c=e.message,o=e.time;return r.a.createElement("article",{key:o+t,className:de()("message",{other:n!==a}),"data-test":"message"},r.a.createElement("header",null,n!==a?n:"Me"),r.a.createElement("blockquote",null,c))}))),r.a.createElement("footer",null,r.a.createElement("div",{className:de()("gravatar",{typing:E})},r.a.createElement(Re,{src:"./images/bitmoji-other.png"})),r.a.createElement("div",{className:"inner-content"},r.a.createElement(ge,{icon:"faCamera",buttonClass:"btn-camera",round:!0}),r.a.createElement(Oe,{placeholder:"Send a chat",rightIcon:"faMicrophone",onChange:function(e){return f(e.currentTarget.value)},onEnter:O,onBlur:O,value:d}),r.a.createElement("div",{className:"right"},r.a.createElement(ge,{icon:"faSmileWink"}),r.a.createElement(ge,{icons:["faMobile","faMobileAlt"],buttonClass:"btn-archive"}),r.a.createElement(ge,{icon:"faRocket"})))),r.a.createElement("audio",{ref:l,className:"app-sound"}))}),Je=(a(142),function(e){var t=e.count,a=void 0===t?1:t;return r.a.createElement(r.a.Fragment,null,new Array(a).fill(null).map((function(e,t){return r.a.createElement("article",{key:"frame-".concat(t),className:"skeleton-frame"})})))}),qe=(a(143),function(e){var t=e.title,a=e.image,n=e.testId;return r.a.createElement("article",{className:"pod spotlight","data-test":n},r.a.createElement("img",{src:a,alt:""}),r.a.createElement("div",{className:"meta"},r.a.createElement("header",null,t)))}),Ye=(a(144),function(e){var t=e.drawerContent,a=Object(n.useRef)(null),c=Object(n.useRef)(!1),o=Object(n.useRef)(function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];var o=function(){a=null,e.apply(void 0,r)};clearTimeout(a),a=setTimeout(o,t)}}((function(){!c.current&&function(e,t){var a=e.getBoundingClientRect(),n=a.top,r=a.bottom;return t?n>=0&&r<=window.innerHeight:n<window.innerHeight&&r>=0}(a.current)&&u((function(e){return e+1}))}),10)),i=Object(n.useState)(1),l=Object(j.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)([]),f=Object(j.a)(m,2),p=f[0],h=f[1];return Object(n.useEffect)((function(){t.current.addEventListener("scroll",o.current)}),[t]),Object(n.useEffect)((function(){Object(y.a)(w.a.mark((function e(){var a,n,r,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.current=!0,e.next=3,I.get("/discover/page/".concat(s,".json"));case 3:if(a=e.sent,n=Object(j.a)(a,2),r=n[0],i=n[1],r){e.next=13;break}if(1!==s){e.next=11;break}return e.next=11,M(1e3);case 11:h((function(e){return[].concat(Object(d.a)(e),Object(d.a)(i.discover))})),c.current=!1;case 13:3===s&&t.current.removeEventListener("scroll",o.current);case 14:case"end":return e.stop()}}),e)})))()}),[s,t]),r.a.createElement("main",{className:"discover"},r.a.createElement(we,{insideDrawer:!0}),r.a.createElement("section",{className:"view"},r.a.createElement(Ce,{className:"friends",header:"Friends",transparent:!0},r.a.createElement("p",null,"Stories from your friends will appear here."),r.a.createElement(ge,{label:"Add Friends",purple:!0})),r.a.createElement(Ce,{header:"For You",transparent:!0},r.a.createElement("div",{className:"inner"},p.length?p.map((function(e){var t=e.image,a=e.title;return r.a.createElement(qe,{key:t,image:t,title:a,testId:"discover-item"})})):r.a.createElement(Je,{count:10}))),r.a.createElement("div",{ref:a,className:"load-more"})))}),Qe=(a(145),function(){var e=Object(u.c)((function(e){return e.app.drawers})),t=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,e&&e.map((function(e){var a,n=e.component,c=e.animationIn,o=e.animationOut,i=e.animationInDuration,l=e.animationOutDuration,s=e.show,u=e.theme,m=e.position,d=document.getElementById(n);return s?null===d||void 0===d||d.classList.remove("collapse"):k((function(){return null===d||void 0===d?void 0:d.classList.add("collapse")}),l),r.a.createElement("aside",{id:n,key:n,className:de()("drawer",(a={},Object(ue.a)(a,u,!0),Object(ue.a)(a,m,!0),a))},r.a.createElement("div",{className:"view","data-test":"".concat(n,"-drawer")},r.a.createElement(ke.Animated,{animationIn:c,animationOut:o,animationInDuration:i,animationOutDuration:l,isVisible:s},r.a.createElement("section",{ref:t,className:"content","data-test":"drawer-content",style:{height:window.innerHeight+"px"}},function(e,a){return{account:r.a.createElement(Le,null),search:r.a.createElement(Ue,{show:a}),snapMap:r.a.createElement(ze,null),snap:r.a.createElement(Be,null),archive:r.a.createElement(Ve,null),chat:r.a.createElement(Ke,null),discover:r.a.createElement(Ye,{drawerContent:t})}[e]}(n,s)))))})))}),Xe=(a(146),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){var t=e.app;return{drawers:t.drawers,footerType:t.footerType}})),a=t.drawers,n=t.footerType;return r.a.createElement(r.a.Fragment,null,"none"!==n&&r.a.createElement("footer",{className:de()("footer",{"light-shadow":je(a)})},r.a.createElement("div",{className:"left"},r.a.createElement(ge,{icons:["faCommentAlt","faDot"],iconClasses:[null,"new-msg"],buttonClass:"btn-chat",testId:"btn-chat",label:"Chat",onclick:function(){return e(h({component:"chat",animationIn:"slideInLeft",animationOut:"slideOutLeft",theme:"stripped"}))}})),r.a.createElement("div",{className:"center"},r.a.createElement(ke.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:500,animationOutDuration:500,isVisible:"collapsed"===n,animateOnMount:!1},r.a.createElement(ge,{icon:"faCircle",buttonClass:"btn-capture",testId:"btn-capture-footer",onclick:function(){e(v("full")),e(E())}})),r.a.createElement(ke.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:500,animationOutDuration:500,isVisible:"full"===n,animateOnMount:!1},r.a.createElement(ge,{icons:["faMobile","faMobileAlt"],buttonClass:"btn-archive",testId:"btn-archive",onclick:function(){e(v("collapsed")),e(h({component:"archive",animationIn:"slideInUp",animationOut:"slideOutDown",position:"back"}))}}))),r.a.createElement("div",{className:"right"},r.a.createElement(ge,{icons:["faMobile","faMobile"],buttonClass:"btn-discover",testId:"btn-discover",label:"Discover",onclick:function(){e(v("collapsed")),e(h({component:"discover",animationIn:"slideInRight",animationOut:"slideOutRight",position:"back"}))}}))))}),$e=function(e){var t=e.children,a=Object(u.b)();return Object(n.useEffect)((function(){a(H()),a(z()),a(T())}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null),r.a.createElement(we,null),r.a.createElement("section",{className:"view"},t),r.a.createElement(Qe,null),r.a.createElement(Xe,null))},Ze=(a(147),function(e){var t=e.takePic,a=e.closePic,c=e.videoElem,o=Object(u.b)(),i=Object(n.useRef)(null);Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=.01*window.innerHeight;e.style.setProperty("--vh",t+"px")}()}),[]);var l=function(){var e;return(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.toDataURL("image/png"))||""};Object(n.useEffect)((function(){t&&(!function(){var e,t=window,a=t.innerWidth,n=t.innerHeight,r=null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getContext("2d");r&&(r.canvas.width=a,r.canvas.height=n,r.drawImage(c,0,0,a,n))}(),o(R(l())))}),[t,c,o]);return r.a.createElement("section",{"data-test":"photo-capture",className:de()("photo-capture",{hide:!t})},r.a.createElement("div",{className:"inner"},r.a.createElement("header",null,r.a.createElement(ge,{icon:"faTimes",onclick:a,testId:"btn-close"})),r.a.createElement("canvas",{ref:i}),r.a.createElement("aside",null,r.a.createElement(ge,{icon:"faTextHeight"}),r.a.createElement(ge,{icon:"faPen"}),r.a.createElement(ge,{icon:"faStickyNote"}),r.a.createElement(ge,{icon:"faCut"}),r.a.createElement(ge,{icon:"faPaperclip"}),r.a.createElement(ge,{icon:"faCropAlt"}),r.a.createElement(ge,{icon:"faStopwatch"})),r.a.createElement("footer",null,r.a.createElement("div",{className:"left"},r.a.createElement(ge,{icon:"faDownload",label:"Save",onclick:function(){var e=l();if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)window.open(e,"_blank");else{var t=document.createElement("a");t.download="download.png",t.href=e,t.click()}},buttonClass:"btn-download"}),r.a.createElement(ge,{icon:"faExternalLinkAlt",label:"Story"})),r.a.createElement("div",{className:"right"},r.a.createElement(ge,{icon:"faPlayCircle",label:"Send To"})))))}),et=(a(148),["dog","halloween","deform","bees","liberty"]),tt=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.camera.cameraMode})),a=Object(n.useRef)(null),c=Object(n.useRef)(null),o=Object(n.useState)(!1),i=Object(j.a)(o,2),l=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(j.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)(et),b=Object(j.a)(h,2),E=b[0],g=b[1],O=Object(n.useState)(""),N=Object(j.a)(O,2),S=N[0],I=N[1],M=Object(n.useState)(!1),A=Object(j.a)(M,2),D=A[0],T=A[1],L=Object(n.useState)(null),P=Object(j.a)(L,2),R=P[0],_=P[1],F=Object(n.useState)(!1),U=Object(j.a)(F,2),H=U[0],z=U[1],B=Object(n.useState)(!1),V=Object(j.a)(B,2),W=V[0],G=V[1],K=Object(n.useCallback)(Object(y.a)(w.a.mark((function e(){var n,r,c,o,i,l,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.navigator,c=null===(n=document.querySelector("#wrapper"))||void 0===n?void 0:n.offsetWidth,"mediaDevices"in r||(r.mediaDevices={}),"getUserMedia"in r.mediaDevices||(r.mediaDevices.getUserMedia=function(e){var t=r.webkitGetUserMedia||r.mozGetUserMedia;return t?new Promise((function(a,n){return t.call(r,e,a,n)})):Promise.reject(new Error("getUserMedia() is not implemented!"))}),e.next=6,x(r.mediaDevices.getUserMedia({video:{facingMode:t,width:{ideal:c}}}));case 6:o=e.sent,i=Object(j.a)(o,2),l=i[0],s=i[1],!l&&a.current?(a.current.srcObject=s,_(s)):G(!0);case 11:case"end":return e.stop()}}),e)}))),[t]);Object(n.useEffect)((function(){K()}),[K]),Object(n.useEffect)((function(){if(S){window.Filters[S].init((function(){T(!0),s(!1),R.getTracks().forEach((function(e){return e.stop()}))}))}}),[S,R]);var J=function(e){var t=E.filter((function(t){return t!==e}));t.splice(2,0,e),g(t)},q=function(){var e=Object(y.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==S){e.next=2;break}return e.abrupt("return");case 2:if(s(!0),J(t),!D){e.next=13;break}return e.next=7,x(window.JEEFACEFILTERAPI.destroy());case 7:a=e.sent,n=Object(j.a)(a,1),n[0]||I(t),e.next=14;break;case 13:I(t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"camera"},l&&r.a.createElement(xe,{message:"Applying Filter",fixed:!0}),W&&r.a.createElement("div",{className:"not-supported"},r.a.createElement("p",null,r.a.createElement("span",{role:"img","aria-label":"crying emoji"},"\ud83d\ude2d")," ","Either your browser doesn't support the getUserMedia API used by the camera or you declined camera access!")),r.a.createElement(ke.Animated,{animationIn:"tada",animationOut:"fadeOut",animationInDuration:1e3,animationOutDuration:0,isVisible:!l&&["dog","halloween"].includes(S),animateOnMount:!1},r.a.createElement("div",{className:"open-mouth"},r.a.createElement("strong",null,"Open Mouth"),r.a.createElement("span",{role:"img","aria-label":"tongue emoji"},"\ud83d\udc45"))),r.a.createElement("video",{ref:a,muted:!0,playsInline:!0,autoPlay:!0,className:de()("video-stream",{hide:D||H})}),r.a.createElement(Ze,{takePic:H,closePic:function(){return z(!1)},videoElem:a.current}),r.a.createElement("section",{className:"controls"},r.a.createElement(ge,{icon:"faCircle",buttonClass:"btn-capture",testId:"btn-capture-main",onclick:function(){W||(z(!0),c.current&&C("cameraShutter",c.current))}}),!f&&r.a.createElement(ge,{icon:"faLaugh",buttonClass:"btn-filters",testId:"btn-filters",onclick:function(){W||(p(!0),e(v("none")),k((function(){return q(E[2])}),100))}}),r.a.createElement(ke.Animated,{animationIn:"zoomIn",animationOut:"zoomOut",animationInDuration:100,animationOutDuration:100,isVisible:f,animateOnMount:!1},r.a.createElement("div",{className:"filters","data-test":"filters"},E.map((function(e){return r.a.createElement(ge,{key:e,image:"./images/filter-".concat(e,".svg"),buttonClass:"filter-".concat(e),onclick:function(){return q(e)}})}))),r.a.createElement("div",{className:"filter-actions"},r.a.createElement(ge,{icon:"faMagic",round:!0}),r.a.createElement(ge,{icon:"faQrcode",round:!0}),r.a.createElement(ge,{icon:"faTimesCircle",buttonClass:"btn-close",onclick:function(){I(""),p(!1),T(!1),e(v("full")),K(),window.JEEFACEFILTERAPI.destroy()}}),r.a.createElement(ge,{icon:"faLaugh",round:!0}),r.a.createElement(ge,{icon:"faSearch",round:!0})))),r.a.createElement("audio",{ref:c,className:"app-sound"}))},at=(a(149),function(){return r.a.createElement("main",{className:"not-found"},r.a.createElement("div",{className:"message"},r.a.createElement("h1",null,"Well, this is awkward!"),r.a.createElement("p",null,"We couldn't find what you were looking for"),r.a.createElement(i.b,{to:"/"},r.a.createElement(ve,{icon:"faSnapchatSquare"}),r.a.createElement("span",null,"Go Home"))))}),nt=(a(151),a(152),a(153),Object(s.a)({reducer:{app:g,camera:F,user:G,snapMap:Q,snap:ne,chat:se}})),rt=function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:nt},r.a.createElement(i.a,null,r.a.createElement($e,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:tt}),r.a.createElement(l.a,{path:"/snapchat-clone",exact:!0,component:tt}),r.a.createElement(l.a,{component:at}))))))};o.a.render(r.a.createElement(rt,null),document.getElementById("root"))},58:function(e,t,a){e.exports=a(154)},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.78675b4e.chunk.js.map